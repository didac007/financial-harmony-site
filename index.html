<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Financial Harmony Dashboard</title>
  <!-- Favicon/logo -->
  <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/didac007/financial-harmony-site@main/logo-fh.png" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" />
  <!-- RemixIcon for pro icons -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://s3.tradingview.com/tv.js"></script>
  <style>
    /* ... (copiar tu CSS actual aquí, o mantenerlo como está, no hay cambios sustanciales para esta parte) ... */
    /* Bot creation modal improvements */
    .bot-type-list {
      display: flex;
      flex-direction: column;
      gap: 18px;
      margin: 18px 0 12px 0;
    }
    .bot-type-btn {
      display: flex;
      align-items: flex-start;
      background: #f5f7fa;
      padding: 17px 17px;
      border-radius: 18px;
      transition: background .15s, box-shadow .18s;
      cursor: pointer;
      box-shadow: 0 2px 8px #0001;
      border: none;
      gap: 18px;
    }
    .bot-type-btn:hover {
      background: var(--primary-light);
      box-shadow: 0 4px 16px #2563eb22;
    }
    .bot-type-btn .bot-type-ico {
      width: 46px; height: 46px; border-radius: 12px;
      background: #e0eaff;
      display: flex; align-items: center; justify-content: center;
      font-size: 2.1rem; color: #2563eb; flex-shrink:0;
    }
    .bot-type-btn .bot-type-txt { flex: 1; }
    .bot-type-btn .bot-type-txt h3 { margin: 0 0 3px 0; font-size: 1.13em; font-weight: 800;}
    .bot-type-btn .bot-type-txt p { margin: 0;font-size: 1em; color: var(--muted);}
    .bot-type-btn.or { justify-content: center; background: none; box-shadow: none; cursor: default; font-weight: bold; color: #aaa; }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <!-- ... (igual que tu código actual) ... -->

  <!-- Topbar -->
  <!-- ... (igual que tu código actual) ... -->

  <!-- Main SPA Sections -->
  <!-- ... (igual que tu código actual) ... -->

  <!-- Bot Type Selection Modal Mejorado -->
  <div class="bot-modal-bg" id="bot-type-modal-bg">
    <div class="bot-modal">
      <button class="close-btn" id="close-bot-type-modal">&times;</button>
      <h2>Create New Bot</h2>
      <div class="bot-type-list">
        <button class="bot-type-btn" data-bot="signals">
          <span class="bot-type-ico"><i class="ri-signal-tower-line"></i></span>
          <span class="bot-type-txt">
            <h3>Signals Bot</h3>
            <p>Follow signals from your favorite groups or our marketplace's experts, executing trades automatically.</p>
          </span>
        </button>
        <button class="bot-type-btn" data-bot="dca">
          <span class="bot-type-ico"><i class="ri-line-chart-line"></i></span>
          <span class="bot-type-txt">
            <h3>DCA Bot</h3>
            <p>Utilize dollar-cost averaging strategy with Cornix's advanced features.</p>
          </span>
        </button>
        <button class="bot-type-btn" data-bot="grid">
          <span class="bot-type-ico"><i class="ri-grid-line"></i></span>
          <span class="bot-type-txt">
            <h3>Grid Bot</h3>
            <p>Automatically place buy and sell orders at preset levels, profiting from market fluctuations.</p>
          </span>
        </button>
        <button class="bot-type-btn" data-bot="tradingview">
          <span class="bot-type-ico"><i class="ri-line-chart-line"></i></span>
          <span class="bot-type-txt">
            <h3>TradingView Bot</h3>
            <p>Link TradingView alerts to Cornix for automatic execution based on your strategies and indicators.</p>
          </span>
        </button>
        <div class="bot-type-btn or" tabindex="-1" style="pointer-events:none; background:none; box-shadow:none;">Or</div>
        <button class="bot-type-btn" data-bot="manual">
          <span class="bot-type-ico"><i class="ri-hand-coin-line"></i></span>
          <span class="bot-type-txt">
            <h3>Manual Trading</h3>
            <p>Execute trades manually with precision and flexibility, utilizing Cornix's powerful tools.</p>
          </span>
        </button>
      </div>
    </div>
  </div>

  <!-- Bot Creation Modal Mejorado -->
  <div class="bot-modal-bg" id="bot-creation-modal-bg">
    <div class="bot-modal">
      <button class="close-btn" id="close-bot-creation-modal">&times;</button>
      <h2 id="bot-creation-title">Create Bot</h2>
      <form id="bot-form">
        <div class="nav-tabs" style="margin-bottom: 16px;">
          <button class="nav-tab active" data-tab="general" type="button">General</button>
          <button class="nav-tab" data-tab="entries" type="button">Entries</button>
          <button class="nav-tab" data-tab="take-profits" type="button">Take-Profits</button>
          <button class="nav-tab" data-tab="stop" type="button">Stop</button>
          <button class="nav-tab" data-tab="advanced" type="button">Advanced</button>
        </div>
        <div class="tab-content active" id="general"></div>
        <div class="tab-content" id="entries"></div>
        <div class="tab-content" id="take-profits"></div>
        <div class="tab-content" id="stop"></div>
        <div class="tab-content" id="advanced"></div>
        <div class="tradingview-widget-container" style="height: 300px; margin-top: 20px;">
          <div id="bot-chart-widget"></div>
        </div>
        <button type="submit" id="bot-create-btn">Create Bot</button>
      </form>
    </div>
  </div>

  <!-- ... (resto de tu código actual, incluyendo el help panel, modals, scripts, etc) ... -->

<script>
  // ... (tu JS previo) ...

  // Bot Modal Mejorado: Bot Type Selection -> Bot Creation
  document.getElementById('create-bot-btn').onclick = () => {
    document.getElementById('bot-type-modal-bg').classList.add('active');
  };
  document.getElementById('close-bot-type-modal').onclick = () => {
    document.getElementById('bot-type-modal-bg').classList.remove('active');
  };
  document.getElementById('bot-type-modal-bg').onclick = (e) => {
    if(e.target===document.getElementById('bot-type-modal-bg')) document.getElementById('bot-type-modal-bg').classList.remove('active');
  };
  // Bot Type click abre modal de creación y precarga interfaz específica
  document.querySelectorAll('.bot-type-btn').forEach(typeBtn => {
    typeBtn.addEventListener('click', () => {
      if(!typeBtn.dataset.bot) return;
      const botType = typeBtn.dataset.bot;
      document.getElementById('bot-type-modal-bg').classList.remove('active');
      document.getElementById('bot-creation-modal-bg').classList.add('active');
      document.getElementById('bot-creation-title').textContent = `Create ${botType.charAt(0).toUpperCase() + botType.slice(1)} Bot`;
      customizeBotForm(botType);
      // Cambia la pestaña a General al abrir
      document.querySelectorAll('#bot-form .nav-tab').forEach(tab=>tab.classList.remove('active'));
      document.querySelector('#bot-form .nav-tab[data-tab="general"]').classList.add('active');
      document.querySelectorAll('#bot-form .tab-content').forEach(tc=>tc.classList.remove('active'));
      document.getElementById('general').classList.add('active');
    });
  });
  document.getElementById('close-bot-creation-modal').onclick = () => {
    document.getElementById('bot-creation-modal-bg').classList.remove('active');
  };
  document.getElementById('bot-creation-modal-bg').onclick = (e) => {
    if(e.target===document.getElementById('bot-creation-modal-bg')) document.getElementById('bot-creation-modal-bg').classList.remove('active');
  };
  // Tabs en modal de creación de bot
  document.querySelectorAll('#bot-form .nav-tab').forEach(tab => {
    tab.addEventListener('click', function(){
      document.querySelectorAll('#bot-form .nav-tab').forEach(t=>t.classList.remove('active'));
      tab.classList.add('active');
      document.querySelectorAll('#bot-form .tab-content').forEach(tc=>tc.classList.remove('active'));
      document.getElementById(tab.dataset.tab).classList.add('active');
    });
  });
  // Interfaz dinámica según tipo de bot (ejemplo básico, puedes ampliar)
  function customizeBotForm(botType) {
    const $ = s=>document.getElementById(s);
    // Limpia todos los tabs
    ['general','entries','take-profits','stop','advanced'].forEach(id=>$(id).innerHTML='');
    if(botType==='signals') {
      $('general').innerHTML = `
        <label>Bot Name</label>
        <input type="text" value="BTC/USDT Signals Bot">
        <label>Account</label>
        <select><option>My-Bitget-Futures-8D21</option></select>
        <label>Symbol</label>
        <select><option>BTC/USDT</option></select>
      `;
      $('entries').innerHTML = `<label>Signal Source</label><input type="text" value="Grupo VIP">`;
      $('take-profits').innerHTML = `<label>Take Profits</label><input type="text" value="2%, 4%, 8%">`;
      $('stop').innerHTML = `<label>Stop Loss (%)</label><input type="number" value="10">`;
    }
    else if(botType==='dca') {
      $('general').innerHTML = `
        <label>Bot Name</label>
        <input type="text" value="BTC/USDT DCA Bot">
        <label>Account</label>
        <select><option>My-Bitget-Spot-8D21</option></select>
        <label>Symbol</label>
        <select><option>BTC/USDT</option></select>
        <label>Amount Per Trade</label>
        <input type="number" value="6.31">
      `;
      $('entries').innerHTML = `<label>DCA Interval (%)</label><input type="number" value="5">`;
      $('take-profits').innerHTML = `<label>Take Profits</label><input type="text" value="2%, 4%, 8%">`;
      $('stop').innerHTML = `<label>Stop Loss (%)</label><input type="number" value="10">`;
    }
    else if(botType==='grid') {
      $('general').innerHTML = `
        <label>Bot Name</label>
        <input type="text" value="BTC/USDT Grid Bot">
        <label>Account</label>
        <select><option>My-Bitget-Spot-8D21</option></select>
        <label>Symbol</label>
        <select><option>BTC/USDT</option></select>
        <label>Price Range</label>
        <input type="text" value="80269.65 - 114670.94">
        <label>Grids</label>
        <input type="number" value="5">
        <label>Amount Per Trade</label>
        <input type="number" value="11.28">
      `;
      $('entries').innerHTML = `<label>Grid Interval (%)</label><input type="number" value="3">`;
      $('take-profits').innerHTML = `<label>Take Profits</label><input type="text" value="1%, 2%, 3%">`;
      $('stop').innerHTML = `<label>Stop Loss (%)</label><input type="number" value="10">`;
    }
    else if(botType==='tradingview') {
      $('general').innerHTML = `
        <label>Bot Name</label>
        <input type="text" value="BTC/USDT TV Bot">
        <label>Account</label>
        <select><option>My-Bitget-Futures-8D21</option></select>
        <label>Symbol</label>
        <select><option>BTC/USDT</option></select>
        <label>Amount Per Trade</label>
        <input type="number" value="12.3">
      `;
      $('entries').innerHTML = `<label>TradingView Webhook</label><input type="text" value="https://...">`;
      $('take-profits').innerHTML = `<label>Take Profits</label><input type="text" value="1.5%, 3%, 5%">`;
      $('stop').innerHTML = `<label>Stop Loss (%)</label><input type="number" value="10">`;
    }
    else if(botType==='manual') {
      $('general').innerHTML = `
        <label>Bot Name</label>
        <input type="text" value="Manual Bot">
        <label>Account</label>
        <select><option>My-Bitget-Spot-8D21</option></select>
        <label>Symbol</label>
        <select><option>BTC/USDT</option></select>
      `;
      $('entries').innerHTML = `<label>Entry Price</label><input type="number" value="112000">`;
      $('take-profits').innerHTML = `<label>Take Profits</label><input type="text" value="2%, 4%, 8%">`;
      $('stop').innerHTML = `<label>Stop Loss (%)</label><input type="number" value="10">`;
    }
    $('advanced').innerHTML = `
      <label>Extra Params</label>
      <input type="text" placeholder="Custom UUID, etc.">
    `;
  }
  // (El resto de tu JS puede ir igual, para SPA navigation, help, notificaciones, etc)
</script>
</body>
</html>